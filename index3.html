<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Carb / Sugar Anxiety Timing Explorer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      color-scheme: dark;
      --bg: #050507;
      --card: #101015;
      --card-soft: #13141a;
      --border-subtle: rgba(255, 255, 255, 0.08);
      --accent: #4fd1c5;
      --accent-soft: rgba(79, 209, 197, 0.12);
      --danger: #ff5d4f;
      --danger-soft: rgba(255, 93, 79, 0.15);
      --warn: #f6c94a;
      --text-main: #f7f7f7;
      --text-soft: #aaaaaa;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
        system-ui, sans-serif;
      background: radial-gradient(circle at top, #181926 0, #050507 55%);
      color: var(--text-main);
    }

    .app-shell {
      max-width: 980px;
      margin: 0 auto;
      padding: 16px 16px 40px;
    }

    header {
      padding: 8px 0 14px;
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 1.4rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    header p {
      margin: 0;
      font-size: 0.88rem;
      color: var(--text-soft);
      max-width: 640px;
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .pill {
      font-size: 0.75rem;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text-soft);
    }

    .card {
      background: linear-gradient(145deg, #101015, #111722);
      border-radius: 16px;
      border: 1px solid var(--border-subtle);
      padding: 14px 14px 16px;
      margin-top: 12px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
    }

    .card-section {
      margin-top: 8px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .section-header h2 {
      margin: 0;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #e5e5e5;
    }

    .section-subtitle {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .section-title-row {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .section-title-row span:first-child {
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .section-title-row .risk-range-label {
      font-size: 0.78rem;
      opacity: 0.8;
    }

    /* Mode toggle */

    .mode-toggle-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 6px;
    }

    .mode-toggle-btn {
      flex: 1;
      padding: 6px 10px;
      font-size: 0.85rem;
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(255, 255, 255, 0.02);
      color: var(--text-soft);
      cursor: pointer;
    }

    .mode-toggle-btn.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: #defaf6;
    }

    .mode-description {
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-bottom: 6px;
    }

    /* Layout splits */

    .two-col {
      display: grid;
      grid-template-columns: 1.15fr 0.95fr;
      gap: 10px;
    }

    @media (max-width: 780px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }

    /* Inputs */

    label {
      font-size: 0.8rem;
      color: var(--text-soft);
      display: block;
      margin-bottom: 3px;
    }

    input[type="time"],
    input[type="number"],
    input[type="text"],
    select {
      width: 100%;
      padding: 6px 9px;
      font-size: 0.85rem;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      background: #05060a;
      color: var(--text-main);
    }

    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .input-row {
      display: flex;
      gap: 8px;
    }

    .input-row > div {
      flex: 1;
    }

    .hint {
      font-size: 0.78rem;
      color: var(--text-soft);
      margin-top: 3px;
    }

    .slider-row {
      margin-top: 6px;
    }

    .slider-row-inner {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    input[type="range"] {
      flex: 1;
    }

    .slider-label {
      font-size: 0.78rem;
      width: 2.1rem;
      text-align: right;
      color: var(--text-soft);
    }

    /* Simple mode food picker */

    .simple-mode-panel,
    .advanced-mode-panel {
      margin-top: 6px;
    }

    .simple-mode-panel.hidden,
    .advanced-mode-panel.hidden {
      display: none;
    }

    .food-search-row {
      display: flex;
      gap: 6px;
      align-items: center;
      margin-bottom: 6px;
    }

    .food-search-row input {
      flex: 1;
    }

    .clear-food-btn {
      font-size: 0.75rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-soft);
      padding: 4px 8px;
      cursor: pointer;
    }

    .food-grid {
      max-height: 260px;
      overflow: auto;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: radial-gradient(circle at top left, #181927 0, #0a0b10 46%);
      padding: 4px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 4px;
      margin-bottom: 6px;
    }

    .food-card {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding: 6px 7px;
      border-radius: 9px;
      border: 1px solid rgba(255, 255, 255, 0.07);
      background: rgba(8, 10, 16, 0.9);
      font-size: 0.8rem;
      cursor: pointer;
      gap: 2px;
      transition: background 0.15s ease, border-color 0.15s ease,
        box-shadow 0.15s ease, transform 0.15s ease;
    }

    .food-card.selected {
      border-color: var(--accent);
      background: rgba(79, 209, 197, 0.16);
      box-shadow: 0 0 0 1px rgba(79, 209, 197, 0.4),
        0 6px 14px rgba(0, 0, 0, 0.6);
      transform: translateY(-1px);
    }

    .food-title-row {
      display: flex;
      align-items: center;
      gap: 4px;
      font-weight: 500;
    }

    .food-meta {
      font-size: 0.75rem;
      color: var(--text-soft);
    }

    .food-tag {
      font-size: 0.7rem;
      margin-top: 2px;
      padding: 1px 6px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.04);
      color: var(--text-soft);
    }

    .selected-meal-summary {
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    /* Dessert quick add */

    .chip-row {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 4px;
    }

    .chip-button {
      font-size: 0.78rem;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text-soft);
      cursor: pointer;
    }

    .chip-button.active {
      border-color: var(--danger);
      background: var(--danger-soft);
      color: #ffd2cd;
    }

    /* Risk gauge */

    .risk-gauge-wrap {
      margin-top: 8px;
    }

    .risk-gauge-bar {
      position: relative;
      margin-top: 10px;
      width: 100%;
      height: 18px;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        #1b8a3f,
        #74b83b,
        #f0c83d,
        #f39a3c,
        #d8423b
      );
      overflow: hidden;
    }

    .risk-marker {
      position: absolute;
      top: -4px;
      bottom: -4px;
      width: 3px;
      border-radius: 999px;
      background: #ffffff;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.8);
      pointer-events: none;
    }

    .risk-score-chip {
      position: absolute;
      top: -26px;
      transform: translateX(-50%);
      font-size: 0.75rem;
      padding: 2px 9px;
      border-radius: 999px;
      white-space: nowrap;
      background: #050505;
      border: 1px solid rgba(255, 255, 255, 0.25);
      pointer-events: none;
    }

    .risk-chip-low {
      border-color: #1fbf63;
      color: #9df2b9;
    }
    .risk-chip-moderate {
      border-color: #f6c94a;
      color: #ffeaa0;
    }
    .risk-chip-high {
      border-color: #ff5d4f;
      color: #ffb4ac;
    }

    .risk-ticks {
      display: flex;
      justify-content: space-between;
      font-size: 0.7rem;
      opacity: 0.7;
      margin-top: 4px;
    }

    .risk-band-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.78rem;
      opacity: 0.85;
      margin-top: 4px;
    }

    .risk-current-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
      font-size: 0.9rem;
    }

    .risk-pill {
      padding: 3px 10px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 500;
    }

    .risk-pill-low {
      background: rgba(18, 120, 49, 0.9);
      color: #c7f7d8;
    }

    .risk-pill-moderate {
      background: rgba(189, 141, 19, 0.9);
      color: #ffe7a5;
    }

    .risk-pill-high {
      background: rgba(179, 42, 42, 0.9);
      color: #ffd0cd;
    }

    .risk-one-liner {
      margin-top: 6px;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    /* Timeline */

    .timeline-wrap {
      margin-top: 8px;
    }

    .timeline-bar {
      position: relative;
      width: 100%;
      height: 18px;
      border-radius: 999px;
      overflow: hidden;
      background: #090a0f;
      display: flex;
    }

    .timeline-segment {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      color: #f5f5f5;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    }

    .seg-spike {
      background: linear-gradient(90deg, #2684ff, #4fd1c5);
    }

    .seg-crash {
      background: linear-gradient(90deg, #f6c94a, #f39a3c);
    }

    .seg-recovery {
      background: linear-gradient(90deg, #2b9f54, #126136);
    }

    .timeline-times {
      margin-top: 6px;
      font-size: 0.78rem;
      color: var(--text-soft);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 4px;
    }

    /* Summary */

    .summary-main {
      font-size: 0.9rem;
      margin-bottom: 4px;
    }

    .summary-detail {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .recalc-row {
      display: flex;
      justify-content: flex-end;
      margin-top: 10px;
    }

    .recalc-btn {
      padding: 10px 22px;
      border-radius: 999px;
      border: 1px solid var(--accent);
      background: linear-gradient(135deg, #38b2ac, #4fd1c5);
      color: #eafffb;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
    }

    .recalc-btn:active {
      transform: translateY(1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
    }

    @media (max-width: 640px) {
      header h1 {
        font-size: 1.2rem;
      }
      .risk-gauge-bar {
        height: 16px;
      }
      .risk-score-chip {
        top: -24px;
        font-size: 0.72rem;
      }
      .risk-current-row {
        flex-direction: column;
        align-items: flex-start;
      }
      .recalc-row {
        justify-content: center;
      }
      .recalc-btn {
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <h1>Carb / Sugar Anxiety Timing Explorer</h1>
      <p>
        Rough, biology-informed estimate of when carbs, added sugar, caffeine,
        and sensitivity might create a ‚Äúspike ‚Üí crash ‚Üí anxiety‚Äù window.
        Not medical advice; just a pattern explorer.
      </p>
      <div class="pill-row">
        <div class="pill">Focus: post-meal hours, not psychology</div>
        <div class="pill">Built for sensitive gut / nervous system people</div>
      </div>
    </header>

    <div class="card">
      <div class="section-header">
        <h2>Meal and pattern</h2>
        <div class="section-subtitle">
          Change the meal and sliders, then watch the score and timing move.
        </div>
      </div>

      <div class="mode-toggle-row">
        <button id="modeSimpleBtn" class="mode-toggle-btn active">
          Simple (pick a meal)
        </button>
        <button id="modeAdvancedBtn" class="mode-toggle-btn">
          Advanced (exact grams)
        </button>
      </div>
      <div id="modeDescription" class="mode-description">
        Simple mode: pick the meal that looks closest to what you ate, then
        tweak dessert and sensitivity.
      </div>

      <div class="two-col">
        <!-- LEFT: simple / advanced inputs -->
        <div>
          <div class="card-section">
            <label for="mealTimeInput">What time did you eat this meal?</label>
            <input id="mealTimeInput" type="time" />
            <div class="hint">
              If you skip this, the timeline uses ‚Äúnow‚Äù to estimate windows.
            </div>
          </div>

          <!-- SIMPLE MODE -->
          <div id="simplePanel" class="simple-mode-panel">
            <div class="card-section">
              <label>Simple: what did the meal look like?</label>
              <div class="food-search-row">
                <input
                  id="foodSearchInput"
                  type="text"
                  placeholder="Search (pizza, pasta, sushi, salad, soda...)"
                />
                <button id="clearFoodBtn" class="clear-food-btn">
                  Clear
                </button>
              </div>
              <div id="foodGrid" class="food-grid">
                <!-- filled by JS -->
              </div>
              <div id="selectedMealText" class="selected-meal-summary">
                No meal selected yet.
              </div>
            </div>

            <div class="card-section">
              <label>Did you add dessert?</label>
              <div class="chip-row">
                <button
                  id="dessertNoneBtn"
                  class="chip-button active"
                  type="button"
                >
                  No dessert
                </button>
                <button id="dessertSmallBtn" class="chip-button" type="button">
                  Small dessert (~10 g sugar)
                </button>
                <button id="dessertBigBtn" class="chip-button" type="button">
                  Big dessert (~35 g sugar)
                </button>
              </div>
              <div class="hint">
                Big dessert might be a bowl of ice cream, a big slice of cake,
                or 2‚Äì3 cookies.
              </div>
            </div>

            <div class="card-section slider-row">
              <label>How carb-heavy has the rest of your day been?</label>
              <div class="slider-row-inner">
                <input
                  id="dayCarbSlider"
                  type="range"
                  min="0"
                  max="2"
                  step="1"
                  value="1"
                />
                <div class="slider-label" id="dayCarbLabel">Medium</div>
              </div>
              <div class="hint">
                0 = mostly light / low carb so far, 2 = lots of bread, pasta,
                sweets, snacks earlier.
              </div>
            </div>
          </div>

          <!-- ADVANCED MODE -->
          <div id="advancedPanel" class="advanced-mode-panel hidden">
            <div class="card-section">
              <label for="advCarbsInput">Total carbs in this meal (g)</label>
              <input
                id="advCarbsInput"
                type="number"
                min="0"
                max="200"
                step="1"
                value="60"
              />
              <div class="hint">
                Restaurant-sized pasta / rice plates are often 60‚Äì90 g of
                carbs.
              </div>
            </div>
            <div class="card-section">
              <label for="advSugarInput">Added sugar in this meal (g)</label>
              <input
                id="advSugarInput"
                type="number"
                min="0"
                max="120"
                step="1"
                value="15"
              />
              <div class="hint">
                1 big dessert can be 25‚Äì40 g. A can of soda is about 39 g.
              </div>
            </div>
            <div class="card-section">
              <label for="advCaffeineInput">
                Caffeine in the last few hours (mg)
              </label>
              <input
                id="advCaffeineInput"
                type="number"
                min="0"
                max="400"
                step="5"
                value="0"
              />
              <div class="hint">
                8 oz coffee ~80‚Äì100 mg. Many energy drinks ~150‚Äì200 mg.
              </div>
            </div>

            <div class="card-section slider-row">
              <label>Earlier carb load today</label>
              <div class="slider-row-inner">
                <input
                  id="advDayCarbSlider"
                  type="range"
                  min="0"
                  max="2"
                  step="1"
                  value="1"
                />
                <div class="slider-label" id="advDayCarbLabel">Medium</div>
              </div>
            </div>
          </div>

          <!-- Shared sensitivity sliders -->
          <div class="card-section slider-row">
            <label>Visceral sensitivity (gut volume knob)</label>
            <div class="slider-row-inner">
              <input
                id="visceralSlider"
                type="range"
                min="0"
                max="2"
                step="1"
                value="1"
              />
              <div class="slider-label" id="visceralLabel">Medium</div>
            </div>
          </div>
          <div class="card-section slider-row">
            <label>Anxiety system sensitivity</label>
            <div class="slider-row-inner">
              <input
                id="anxietySlider"
                type="range"
                min="0"
                max="2"
                step="1"
                value="1"
              />
              <div class="slider-label" id="anxietyLabel">Medium</div>
            </div>
            <div class="hint">
              0 = rarely anxious, 2 = nervous system that notices every
              little crash.
            </div>
          </div>
        </div>

        <!-- RIGHT: gauge + timeline + summary -->
        <div>
          <!-- Risk gauge -->
          <div class="card-section">
            <div class="section-title-row">
              <span>Risk gauge</span>
              <span class="risk-range-label">
                0‚Äì49 Low, 50‚Äì74 Moderate, 75+ High
              </span>
            </div>

            <div class="risk-gauge-wrap">
              <div class="risk-gauge-bar" id="riskBar">
                <div class="risk-score-chip" id="riskScoreChip">0 ‚Ä¢ Low</div>
                <div class="risk-marker" id="riskMarker"></div>
              </div>

              <div class="risk-ticks">
                <span>0</span>
                <span>25</span>
                <span>50</span>
                <span>75</span>
                <span>100</span>
              </div>

              <div class="risk-band-labels">
                <span>Low</span>
                <span>Moderate</span>
                <span>High</span>
              </div>

              <div class="risk-current-row">
                <span id="riskScoreLabel">Current score 0 of 100</span>
                <span
                  class="risk-pill risk-pill-low"
                  id="riskBandPill"
                >
                  Low
                </span>
              </div>

              <div class="risk-one-liner" id="riskOneLiner">
                Biology says this pattern should feel pretty stable for most
                people.
              </div>
            </div>
          </div>

          <!-- Timeline -->
          <div class="card-section">
            <div class="section-header">
              <h2>Spike ‚Üí crash ‚Üí recovery timeline</h2>
            </div>
            <div class="timeline-wrap">
              <div class="timeline-bar">
                <div class="timeline-segment seg-spike">
                  Spike window
                </div>
                <div class="timeline-segment seg-crash">
                  Crash / anxiety window
                </div>
                <div class="timeline-segment seg-recovery">
                  Recovery
                </div>
              </div>
              <div class="hint">
                Colors match the gauge above: spike, then crash window, then
                recovery.
              </div>
              <div class="timeline-times" id="timelineTimes">
                <!-- filled by JS -->
              </div>
            </div>
          </div>

          <!-- Summary -->
          <div class="card-section">
            <div class="section-header">
              <h2>Quick summary</h2>
            </div>
            <div id="summaryMain" class="summary-main">
              Enter a meal to see a rough score.
            </div>
            <div id="summaryDetail" class="summary-detail">
              You will see how carbs, sugar, caffeine, and sensitivity stack to
              make an early-night or late-night worry window more likely. It is
              about timing and physiology, not personal weakness.
            </div>
            <div class="recalc-row">
              <button id="recalcBtn" class="recalc-btn" type="button">
                Recalculate now ‚Üª
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
        <script>
      // --------- Meal presets (large list) ----------
      const mealPresets = [
        {
          id: "pasta",
          emoji: "üçù",
          name: "Plate of pasta",
          category: "Dinner, Italian",
          carbs: 80,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 3,
          tag: "High carb"
        },
        {
          id: "riceBowlSimple",
          emoji: "üçö",
          name: "Rice bowl",
          category: "Lunch or dinner",
          carbs: 70,
          fiber: 2,
          fatLevel: 0,
          sugarBase: 2,
          tag: "High carb"
        },
        {
          id: "ramenSimple",
          emoji: "üçú",
          name: "Ramen or noodle bowl",
          category: "Dinner, noodles",
          carbs: 65,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 3,
          tag: "High carb"
        },
        {
          id: "friedRiceSimple",
          emoji: "üçõ",
          name: "Fried rice",
          category: "Takeout, Chinese",
          carbs: 75,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "High carb"
        },
        {
          id: "orangeChickenSimple",
          emoji: "üçõ",
          name: "Orange chicken plus rice",
          category: "Takeout, Chinese",
          carbs: 85,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 10,
          tag: "High carb and sugar"
        },
        {
          id: "pizza2",
          emoji: "üçï",
          name: "Pizza, 2 slices",
          category: "Dinner, pizza",
          carbs: 60,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "High carb and fat"
        },
        {
          id: "burgerFries",
          emoji: "üçî",
          name: "Burger with fries",
          category: "Fast food",
          carbs: 70,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 4,
          tag: "Heavy"
        },
        {
          id: "burgerOnly",
          emoji: "üçî",
          name: "Burger, no fries",
          category: "Fast food",
          carbs: 45,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "burrito",
          emoji: "üåØ",
          name: "Burrito",
          category: "Mexican style",
          carbs: 75,
          fiber: 6,
          fatLevel: 2,
          sugarBase: 3,
          tag: "High carb"
        },
        {
          id: "tacosSimple",
          emoji: "üåÆ",
          name: "Tacos, 2 to 3",
          category: "Mexican style",
          carbs: 45,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "chipotleBowl",
          emoji: "ü•ó",
          name: "Burrito bowl",
          category: "Mexican bowl",
          carbs: 65,
          fiber: 7,
          fatLevel: 2,
          sugarBase: 3,
          tag: "High carb, higher fiber"
        },
        {
          id: "sushi12",
          emoji: "üç£",
          name: "Sushi, 12 pieces",
          category: "Dinner, lighter",
          carbs: 70,
          fiber: 3,
          fatLevel: 0,
          sugarBase: 2,
          tag: "High carb, low fat"
        },
        {
          id: "saladLowCarb",
          emoji: "ü•ó",
          name: "Salad, low carb",
          category: "Lighter meal",
          carbs: 18,
          fiber: 6,
          fatLevel: 1,
          sugarBase: 1,
          tag: "Light"
        },
        {
          id: "proteinMeal",
          emoji: "üçó",
          name: "Protein heavy, low carb",
          category: "Chicken, fish, meat",
          carbs: 20,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 1,
          tag: "Lower carb"
        },
        {
          id: "sandwich",
          emoji: "ü•™",
          name: "Sandwich",
          category: "Lunch",
          carbs: 45,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "breakfastCombo",
          emoji: "ü•ì",
          name: "Breakfast combo",
          category: "Eggs, hash browns, toast",
          carbs: 55,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb and fat"
        },
        {
          id: "cerealBowl",
          emoji: "ü•£",
          name: "Cereal bowl",
          category: "Breakfast",
          carbs: 55,
          fiber: 3,
          fatLevel: 0,
          sugarBase: 8,
          tag: "Sugary"
        },
        {
          id: "bagelCreamCheese",
          emoji: "ü•Ø",
          name: "Bagel with cream cheese",
          category: "Breakfast or snack",
          carbs: 60,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 4,
          tag: "High carb"
        },
        {
          id: "potatoBaked",
          emoji: "ü•î",
          name: "Baked potato with toppings",
          category: "Dinner side",
          carbs: 60,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 1,
          tag: "High carb"
        },
        {
          id: "smoothie",
          emoji: "ü•§",
          name: "Fruit smoothie",
          category: "Drink or snack",
          carbs: 55,
          fiber: 4,
          fatLevel: 0,
          sugarBase: 30,
          tag: "High sugar"
        },
        {
          id: "iceCream",
          emoji: "üç®",
          name: "Ice cream bowl",
          category: "Dessert",
          carbs: 45,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 28,
          tag: "High sugar"
        },
        {
          id: "dessertOnly",
          emoji: "üç∞",
          name: "Dessert-only meal",
          category: "Cake, pastry, etc",
          carbs: 55,
          fiber: 1,
          fatLevel: 1,
          sugarBase: 30,
          tag: "High sugar"
        },
        {
          id: "snackPlate",
          emoji: "üßÄ",
          name: "Snack plate",
          category: "Cheese, crackers, nuts",
          carbs: 25,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb"
        },
        {
          id: "soupBread",
          emoji: "üç≤",
          name: "Soup with bread",
          category: "Lunch or dinner",
          carbs: 45,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "otherHeavy",
          emoji: "üçΩÔ∏è",
          name: "Other heavy carb dinner",
          category: "General",
          carbs: 75,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 3,
          tag: "Heavy"
        },

        /* Extra breakfast / lunch / bowls / snacks / desserts / drinks... */
        {
          id: "oatmealFruit",
          emoji: "ü•£",
          name: "Oatmeal with fruit",
          category: "Breakfast, warm",
          carbs: 45,
          fiber: 6,
          fatLevel: 0,
          sugarBase: 8,
          tag: "Medium carb, higher fiber"
        },
        {
          id: "pancakesSyrup",
          emoji: "ü•û",
          name: "Pancakes with syrup",
          category: "Breakfast, sweet",
          carbs: 65,
          fiber: 2,
          fatLevel: 1,
          sugarBase: 20,
          tag: "High carb and sugar"
        },
        {
          id: "wafflesSyrup",
          emoji: "üßá",
          name: "Waffles with syrup",
          category: "Breakfast, sweet",
          carbs: 65,
          fiber: 2,
          fatLevel: 1,
          sugarBase: 20,
          tag: "High carb and sugar"
        },
        {
          id: "frenchToast",
          emoji: "üçû",
          name: "French toast with syrup",
          category: "Breakfast, sweet",
          carbs: 60,
          fiber: 2,
          fatLevel: 1,
          sugarBase: 18,
          tag: "High carb and sugar"
        },
        {
          id: "cerealMilk",
          emoji: "ü•£",
          name: "Cereal with milk",
          category: "Breakfast, boxed cereal",
          carbs: 55,
          fiber: 3,
          fatLevel: 0,
          sugarBase: 12,
          tag: "Sugary"
        },
        {
          id: "granolaYogurt",
          emoji: "ü•£",
          name: "Granola with yogurt",
          category: "Breakfast or snack",
          carbs: 50,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 15,
          tag: "Medium carb, sweet"
        },
        {
          id: "toastButterJam",
          emoji: "üçû",
          name: "Toast with butter and jam",
          category: "Breakfast or snack",
          carbs: 35,
          fiber: 2,
          fatLevel: 1,
          sugarBase: 10,
          tag: "Medium carb and sugar"
        },
        {
          id: "eggsToast",
          emoji: "üç≥",
          name: "Eggs with toast",
          category: "Breakfast plate",
          carbs: 25,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb, higher fat"
        },
        {
          id: "bigBreakfastPlatter",
          emoji: "ü•ì",
          name: "Big breakfast platter",
          category: "Eggs, meat, potatoes, toast",
          carbs: 55,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 4,
          tag: "Medium carb and fat"
        },
        {
          id: "yogurtCup",
          emoji: "ü•õ",
          name: "Yogurt cup",
          category: "Breakfast or snack",
          carbs: 20,
          fiber: 0,
          fatLevel: 1,
          sugarBase: 12,
          tag: "Light, sweet"
        },
        {
          id: "fruitBowl",
          emoji: "üçì",
          name: "Fresh fruit bowl",
          category: "Breakfast or snack",
          carbs: 30,
          fiber: 4,
          fatLevel: 0,
          sugarBase: 12,
          tag: "Light, natural sugar"
        },
        {
          id: "veggieOmelet",
          emoji: "üç≥",
          name: "Veggie omelet",
          category: "Breakfast, low carb",
          carbs: 10,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 1,
          tag: "Lower carb"
        },
        {
          id: "breakfastBurrito",
          emoji: "üåØ",
          name: "Breakfast burrito",
          category: "Breakfast wrap",
          carbs: 55,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb and fat"
        },
        {
          id: "breakfastSandwich",
          emoji: "ü•™",
          name: "Breakfast sandwich",
          category: "Egg, cheese, bread",
          carbs: 40,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb"
        },

        {
          id: "turkeySandwich",
          emoji: "ü•™",
          name: "Turkey sandwich",
          category: "Lunch sandwich",
          carbs: 40,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 3,
          tag: "Medium carb"
        },
        {
          id: "hamCheeseSandwich",
          emoji: "ü•™",
          name: "Ham and cheese sandwich",
          category: "Lunch sandwich",
          carbs: 40,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb and fat"
        },
        {
          id: "grilledCheese",
          emoji: "üßÄ",
          name: "Grilled cheese sandwich",
          category: "Lunch sandwich",
          carbs: 35,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb, high fat"
        },
        {
          id: "chickenSaladSandwich",
          emoji: "ü•™",
          name: "Chicken salad sandwich",
          category: "Lunch sandwich",
          carbs: 40,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb and fat"
        },
        {
          id: "veggieWrap",
          emoji: "üåØ",
          name: "Veggie wrap",
          category: "Lunch wrap",
          carbs: 40,
          fiber: 5,
          fatLevel: 1,
          sugarBase: 3,
          tag: "Medium carb, higher fiber"
        },
        {
          id: "chickenCaesarWrap",
          emoji: "üåØ",
          name: "Chicken Caesar wrap",
          category: "Lunch wrap",
          carbs: 45,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb and fat"
        },

        {
          id: "brothSoupLight",
          emoji: "üç≤",
          name: "Broth based soup",
          category: "Light meal",
          carbs: 20,
          fiber: 2,
          fatLevel: 0,
          sugarBase: 1,
          tag: "Light"
        },
        {
          id: "chiliAndBread",
          emoji: "üç≤",
          name: "Chili with bread or crackers",
          category: "Hearty bowl",
          carbs: 50,
          fiber: 8,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb, high fiber"
        },
        {
          id: "pokeBowl",
          emoji: "üçö",
          name: "Poke bowl",
          category: "Rice bowl",
          carbs: 60,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 4,
          tag: "High carb"
        },
        {
          id: "grainBowl",
          emoji: "ü•ó",
          name: "Grain bowl",
          category: "Rice or quinoa bowl",
          carbs: 55,
          fiber: 6,
          fatLevel: 1,
          sugarBase: 3,
          tag: "Medium carb, higher fiber"
        },
        {
          id: "phoBowl",
          emoji: "üçú",
          name: "Pho bowl",
          category: "Vietnamese soup",
          carbs: 60,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 2,
          tag: "High carb"
        },
        {
          id: "stirFryNoodles",
          emoji: "üçú",
          name: "Stir fried noodles",
          category: "Asian noodles",
          carbs: 70,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 4,
          tag: "High carb and fat"
        },
        {
          id: "loMein",
          emoji: "üçú",
          name: "Lo mein",
          category: "Chinese noodles",
          carbs: 70,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 4,
          tag: "High carb and fat"
        },
        {
          id: "curryRice",
          emoji: "üçõ",
          name: "Curry with rice",
          category: "Indian or Thai",
          carbs: 70,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 4,
          tag: "High carb, higher fat"
        },
        {
          id: "butterChickenRice",
          emoji: "üçõ",
          name: "Butter chicken with rice",
          category: "Indian style",
          carbs: 70,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 4,
          tag: "High carb and fat"
        },
        {
          id: "stirFryRice",
          emoji: "üçö",
          name: "Stir fry with rice",
          category: "Rice bowl",
          carbs: 65,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 3,
          tag: "High carb"
        },
        {
          id: "chickenRice",
          emoji: "üçó",
          name: "Chicken with rice",
          category: "Dinner plate",
          carbs: 55,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "sushi8",
          emoji: "üç£",
          name: "Sushi, 8 pieces",
          category: "Lighter dinner",
          carbs: 50,
          fiber: 2,
          fatLevel: 0,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "sashimiSalad",
          emoji: "ü•ó",
          name: "Sashimi with salad",
          category: "Very light carb",
          carbs: 15,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 1,
          tag: "Lower carb"
        },
        {
          id: "pokeBowlLight",
          emoji: "üçö",
          name: "Light poke bowl",
          category: "Rice bowl",
          carbs: 50,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 3,
          tag: "Medium carb"
        },

        {
          id: "tacos2",
          emoji: "üåÆ",
          name: "Tacos, 2",
          category: "Mexican style",
          carbs: 35,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "tacos3",
          emoji: "üåÆ",
          name: "Tacos, 3",
          category: "Mexican style",
          carbs: 50,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "nachosShare",
          emoji: "üßÄ",
          name: "Nachos, shared plate",
          category: "Mexican snack",
          carbs: 60,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 2,
          tag: "High carb and fat"
        },
        {
          id: "quesadilla",
          emoji: "üßÄ",
          name: "Cheese quesadilla",
          category: "Mexican snack",
          carbs: 45,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb and fat"
        },

        {
          id: "steakPotato",
          emoji: "ü•©",
          name: "Steak with baked potato",
          category: "Dinner plate",
          carbs: 50,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 1,
          tag: "Medium carb, high fat"
        },
        {
          id: "chickenVeg",
          emoji: "üçó",
          name: "Grilled chicken with vegetables",
          category: "Dinner plate",
          carbs: 20,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 1,
          tag: "Lower carb"
        },
        {
          id: "salmonVeg",
          emoji: "üêü",
          name: "Salmon with vegetables",
          category: "Dinner plate",
          carbs: 15,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 1,
          tag: "Lower carb"
        },
        {
          id: "porkChopPotato",
          emoji: "üçñ",
          name: "Pork chop with potatoes",
          category: "Dinner plate",
          carbs: 45,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "meatloafMashed",
          emoji: "üçñ",
          name: "Meatloaf with mashed potatoes",
          category: "Dinner plate",
          carbs: 55,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb and fat"
        },

        {
          id: "chipsBag",
          emoji: "üçü",
          name: "Bag of chips",
          category: "Snack",
          carbs: 30,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 1,
          tag: "Medium carb, high fat"
        },
        {
          id: "popcornBowl",
          emoji: "üçø",
          name: "Bowl of popcorn",
          category: "Snack",
          carbs: 25,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 1,
          tag: "Medium carb"
        },
        {
          id: "nutsHandful",
          emoji: "ü•ú",
          name: "Handful of nuts",
          category: "Snack",
          carbs: 8,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 1,
          tag: "Mostly fat and fiber"
        },
        {
          id: "trailMix",
          emoji: "ü•ú",
          name: "Trail mix",
          category: "Snack",
          carbs: 25,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 10,
          tag: "Medium carb and sugar"
        },
        {
          id: "hummusVeg",
          emoji: "ü•ï",
          name: "Hummus with vegetables",
          category: "Snack",
          carbs: 20,
          fiber: 5,
          fatLevel: 1,
          sugarBase: 1,
          tag: "Light to medium carb"
        },
        {
          id: "hummusPita",
          emoji: "ü•ô",
          name: "Hummus with pita",
          category: "Snack",
          carbs: 35,
          fiber: 5,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Medium carb"
        },
        {
          id: "cheeseCrackers",
          emoji: "üßÄ",
          name: "Cheese and crackers",
          category: "Snack",
          carbs: 25,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 2,
          tag: "Medium carb, high fat"
        },
        {
          id: "applePeanutButter",
          emoji: "üçé",
          name: "Apple with peanut butter",
          category: "Snack",
          carbs: 30,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 15,
          tag: "Medium carb"
        },
        {
          id: "bananaSnack",
          emoji: "üçå",
          name: "Banana",
          category: "Snack",
          carbs: 25,
          fiber: 3,
          fatLevel: 0,
          sugarBase: 14,
          tag: "Medium carb, natural sugar"
        },
        {
          id: "proteinBar",
          emoji: "üç´",
          name: "Protein bar",
          category: "Snack",
          carbs: 25,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 8,
          tag: "Medium carb"
        },

        {
          id: "milkshake",
          emoji: "ü•§",
          name: "Milkshake",
          category: "Dessert drink",
          carbs: 60,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 40,
          tag: "Very high sugar"
        },
        {
          id: "brownie",
          emoji: "üç´",
          name: "Brownie",
          category: "Dessert",
          carbs: 40,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 25,
          tag: "High sugar"
        },
        {
          id: "cookie2",
          emoji: "üç™",
          name: "Cookies, 2",
          category: "Dessert or snack",
          carbs: 30,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 18,
          tag: "High sugar"
        },
        {
          id: "donut",
          emoji: "üç©",
          name: "Donut",
          category: "Dessert or breakfast",
          carbs: 40,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 20,
          tag: "High sugar and fat"
        },
        {
          id: "cinnamonRoll",
          emoji: "üç©",
          name: "Cinnamon roll",
          category: "Dessert or breakfast",
          carbs: 60,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 30,
          tag: "Very high sugar"
        },
        {
          id: "cakeSlice",
          emoji: "üç∞",
          name: "Slice of cake",
          category: "Dessert",
          carbs: 45,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 28,
          tag: "High sugar"
        },
        {
          id: "cupcake",
          emoji: "üßÅ",
          name: "Cupcake",
          category: "Dessert",
          carbs: 35,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 22,
          tag: "High sugar"
        },
        {
          id: "candyBar",
          emoji: "üç´",
          name: "Candy bar",
          category: "Dessert or snack",
          carbs: 30,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 24,
          tag: "High sugar"
        },
        {
          id: "fruitDessert",
          emoji: "üçì",
          name: "Fruit salad dessert",
          category: "Light dessert",
          carbs: 25,
          fiber: 3,
          fatLevel: 0,
          sugarBase: 14,
          tag: "Medium sugar, lighter"
        },

        {
          id: "sodaCan",
          emoji: "ü•§",
          name: "Soda, 12 oz can",
          category: "Sugary drink",
          carbs: 39,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 39,
          tag: "High sugar"
        },
        {
          id: "sodaLarge",
          emoji: "ü•§",
          name: "Soda, large fountain",
          category: "Sugary drink",
          carbs: 60,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 60,
          tag: "Very high sugar"
        },
        {
          id: "sweetTea",
          emoji: "ü•§",
          name: "Sweet tea",
          category: "Sugary drink",
          carbs: 35,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 35,
          tag: "High sugar"
        },
        {
          id: "sportsDrink",
          emoji: "ü•§",
          name: "Sports drink",
          category: "Sugary drink",
          carbs: 30,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 30,
          tag: "High sugar"
        },
        {
          id: "lemonade",
          emoji: "üçã",
          name: "Lemonade",
          category: "Sugary drink",
          carbs: 35,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 35,
          tag: "High sugar"
        },
        {
          id: "fruitJuiceGlass",
          emoji: "üßÉ",
          name: "Fruit juice glass",
          category: "Sugary drink",
          carbs: 30,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 28,
          tag: "High sugar"
        },
        {
          id: "frappuccino",
          emoji: "‚òïÔ∏è",
          name: "Frappuccino style drink",
          category: "Coffee dessert",
          carbs: 55,
          fiber: 1,
          fatLevel: 2,
          sugarBase: 40,
          tag: "Very high sugar"
        },
        {
          id: "bobaTea",
          emoji: "üßã",
          name: "Boba tea",
          category: "Sugary drink",
          carbs: 55,
          fiber: 1,
          fatLevel: 1,
          sugarBase: 35,
          tag: "High sugar"
        },

        {
          id: "blackCoffeeSmall",
          emoji: "‚òïÔ∏è",
          name: "Black coffee, small",
          category: "Coffee, low sugar",
          carbs: 0,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 0,
          tag: "No sugar"
        },
        {
          id: "blackCoffeeLarge",
          emoji: "‚òïÔ∏è",
          name: "Black coffee, large",
          category: "Coffee, low sugar",
          carbs: 0,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 0,
          tag: "No sugar"
        },
        {
          id: "latteMedium",
          emoji: "‚òïÔ∏è",
          name: "Latte, medium",
          category: "Coffee drink",
          carbs: 18,
          fiber: 0,
          fatLevel: 1,
          sugarBase: 15,
          tag: "Medium sugar"
        },
        {
          id: "energyDrinkCan",
          emoji: "‚ö°Ô∏è",
          name: "Energy drink, 1 can",
          category: "Sugary caffeine drink",
          carbs: 28,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 28,
          tag: "High sugar"
        },
        {
          id: "energyDrinkLarge",
          emoji: "‚ö°Ô∏è",
          name: "Energy drink, large",
          category: "Sugary caffeine drink",
          carbs: 45,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 45,
          tag: "Very high sugar"
        },
        {
          id: "teaWithSugar",
          emoji: "üçµ",
          name: "Tea with sugar",
          category: "Light drink",
          carbs: 18,
          fiber: 0,
          fatLevel: 0,
          sugarBase: 18,
          tag: "Medium sugar"
        },

        {
          id: "gyroFries",
          emoji: "ü•ô",
          name: "Gyro with fries",
          category: "Greek fast casual",
          carbs: 70,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 3,
          tag: "High carb and fat"
        },
        {
          id: "shawarmaWrap",
          emoji: "ü•ô",
          name: "Shawarma wrap",
          category: "Middle Eastern wrap",
          carbs: 55,
          fiber: 4,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb and fat"
        },
        {
          id: "casserolePlate",
          emoji: "üç≤",
          name: "Casserole plate",
          category: "Home style dinner",
          carbs: 55,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 3,
          tag: "Medium carb"
        },
        {
          id: "otherHeavyDinner",
          emoji: "üçΩÔ∏è",
          name: "Other heavy carb dinner (alt)",
          category: "General heavy meal",
          carbs: 75,
          fiber: 3,
          fatLevel: 1,
          sugarBase: 3,
          tag: "Heavy"
        },
        {
          id: "otherLightMeal",
          emoji: "ü•ó",
          name: "Other lighter plate",
          category: "General light meal",
          carbs: 25,
          fiber: 4,
          fatLevel: 1,
          sugarBase: 2,
          tag: "Light to medium carb"
        },
        {
          id: "snackUnknown",
          emoji: "üçø",
          name: "Random snack combo",
          category: "Chips, sweets, random",
          carbs: 40,
          fiber: 2,
          fatLevel: 2,
          sugarBase: 15,
          tag: "Medium carb and sugar"
        },
        {
          id: "mealUnknown",
          emoji: "üçΩÔ∏è",
          name: "Not sure, mixed meal",
          category: "Guess template",
          carbs: 65,
          fiber: 3,
          fatLevel: 2,
          sugarBase: 8,
          tag: "Estimated heavy"
        }
      ];

      // --------- State ----------
      let currentMode = "simple";
      let selectedMealId = null;
      let dessertExtraSugar = 0;

      function $(id) {
        return document.getElementById(id);
      }

      // --------- Gauge ----------
      function updateRiskGauge(score) {
        if (isNaN(score)) score = 0;
        const clamped = Math.max(0, Math.min(100, score));

        const LOW_MAX = 49;
        const MOD_MAX = 74;

        let band = "low";
        if (clamped > MOD_MAX) band = "high";
        else if (clamped > LOW_MAX) band = "moderate";

        const marker = $("riskMarker");
        const chip = $("riskScoreChip");
        const scoreLabel = $("riskScoreLabel");
        const bandPill = $("riskBandPill");
        const oneLiner = $("riskOneLiner");

        if (!marker || !chip) return;

        const percent = 2 + (clamped / 100) * 96;
        marker.style.left = percent + "%";
        chip.style.left = percent + "%";

        const bandLabel =
          band === "low" ? "Low" : band === "moderate" ? "Moderate" : "High";

        chip.textContent = `${Math.round(clamped)} ‚Ä¢ ${bandLabel}`;
        scoreLabel.textContent = `Current score ${Math.round(
          clamped
        )} of 100`;

        bandPill.textContent = bandLabel;
        bandPill.classList.remove(
          "risk-pill-low",
          "risk-pill-moderate",
          "risk-pill-high"
        );
        if (band === "low") bandPill.classList.add("risk-pill-low");
        if (band === "moderate") bandPill.classList.add("risk-pill-moderate");
        if (band === "high") bandPill.classList.add("risk-pill-high");

        chip.classList.remove(
          "risk-chip-low",
          "risk-chip-moderate",
          "risk-chip-high"
        );
        if (band === "low") chip.classList.add("risk-chip-low");
        if (band === "moderate") chip.classList.add("risk-chip-moderate");
        if (band === "high") chip.classList.add("risk-chip-high");

        let msg = "";
        if (band === "low") {
          msg =
            "Biology says this pattern should feel pretty stable for most people.";
        } else if (band === "moderate") {
          msg =
            "Some people feel a crash or anxiety dip here, especially with a sensitive gut.";
        } else {
          msg =
            "Crash and anxiety window is more likely here, especially if your gut and nervous system are touchy.";
        }
        oneLiner.textContent = msg;
      }

      // --------- Timeline ----------
      function formatTime(date) {
        const h = date.getHours();
        const m = date.getMinutes();
        const h12 = ((h + 11) % 12) + 1;
        const ampm = h < 12 ? "am" : "pm";
        const mm = m.toString().padStart(2, "0");
        return `${h12}:${mm} ${ampm}`;
      }

      function addMinutes(baseDate, minutes) {
        const d = new Date(baseDate.getTime());
        d.setMinutes(d.getMinutes() + minutes);
        return d;
      }

      function updateTimeline() {
        const timelineTimes = $("timelineTimes");
        if (!timelineTimes) return;

        let base = new Date();
        const timeVal = $("mealTimeInput")?.value;
        if (timeVal) {
          const [hh, mm] = timeVal.split(":");
          base.setHours(parseInt(hh, 10), parseInt(mm, 10), 0, 0);
        }

        const spikeStart = addMinutes(base, 45);
        const spikeEnd = addMinutes(base, 90);
        const crashStart = addMinutes(base, 90);
        const crashEnd = addMinutes(base, 210);
        const recoveryStart = crashEnd;
        const recoveryEnd = addMinutes(base, 360);

        timelineTimes.innerHTML = `
          <div>Spike window: <strong>${formatTime(
            spikeStart
          )} ‚Äì ${formatTime(spikeEnd)}</strong></div>
          <div>Crash / anxiety window: <strong>${formatTime(
            crashStart
          )} ‚Äì ${formatTime(crashEnd)}</strong></div>
          <div>Recovery trend: <strong>${formatTime(
            recoveryStart
          )} ‚Äì ${formatTime(recoveryEnd)}</strong></div>
        `;
      }

      // --------- Risk calculation ----------
      function getDayCarbLevel() {
        if (currentMode === "simple") {
          return parseInt($("dayCarbSlider").value, 10) || 0;
        }
        return parseInt($("advDayCarbSlider").value, 10) || 0;
      }

      function getSensitivityLevels() {
        const visceral = parseInt($("visceralSlider").value, 10) || 0;
        const anxiety = parseInt($("anxietySlider").value, 10) || 0;
        return { visceral, anxiety };
      }

      function getMealFromSimple() {
        if (!selectedMealId) return null;
        const preset = mealPresets.find((m) => m.id === selectedMealId);
        if (!preset) return null;
        const sugar = preset.sugarBase + dessertExtraSugar;
        return {
          carbs: preset.carbs,
          sugar,
          caffeineMg: 0
        };
      }

      function getMealFromAdvanced() {
        const carbs = parseFloat($("advCarbsInput").value) || 0;
        const sugar = parseFloat($("advSugarInput").value) || 0;
        const caffeineMg = parseFloat($("advCaffeineInput").value) || 0;
        return { carbs, sugar, caffeineMg };
      }

      function computeRiskScore() {
        let carbs = 0;
        let sugar = 0;
        let caffeineMg = 0;

        if (currentMode === "simple") {
          const m = getMealFromSimple();
          if (m) {
            carbs = m.carbs;
            sugar = m.sugar;
            caffeineMg = 0;
          }
        } else {
          const m = getMealFromAdvanced();
          carbs = m.carbs;
          sugar = m.sugar;
          caffeineMg = m.caffeineMg;
        }

        const dayCarb = getDayCarbLevel();
        const { visceral, anxiety } = getSensitivityLevels();

        const baseCarb = Math.min(60, carbs * 0.7);
        const sugarBoost = Math.min(25, sugar * 0.8);
        const earlierBoost = dayCarb * 5;

        let caffeineBoost = 0;
        if (caffeineMg > 0) {
          caffeineBoost = Math.min(15, caffeineMg * 0.1);
        }

        const sensitivityBoost = (visceral + anxiety) * 5;

        let total =
          baseCarb + sugarBoost + earlierBoost + caffeineBoost + sensitivityBoost;

        total = Math.max(0, Math.min(100, total));

        const summaryMain = $("summaryMain");
        const summaryDetail = $("summaryDetail");

        const sensitivityLabel = (() => {
          const sum = visceral + anxiety;
          if (sum <= 1) return "a more resilient system";
          if (sum <= 3) return "a medium sensitivity nervous system";
          return "a very sensitive gut / anxiety system";
        })();

        const mealLabel =
          currentMode === "simple"
            ? selectedMealId
              ? "Based on the meal you picked and dessert"
              : "No meal selected yet"
            : "Based on your carb / sugar numbers and caffeine";

        summaryMain.textContent =
          total === 0
            ? "Enter a meal to see a rough score."
            : `${Math.round(
                total
              )}/100 risk in the 1‚Äì4 hour window after this meal.`;

        summaryDetail.textContent = `${mealLabel}, plus earlier carb load and ${sensitivityLabel}. This does not replace medical care; it just gives a body-timing map and does not mean you are weak or broken.`;

        return total;
      }
                // --------- Simple mode rendering ----------
      function renderFoodGrid(filterText = "") {
        const grid = $("foodGrid");
        if (!grid) return;

        const ft = filterText.trim().toLowerCase();
        const list = ft
          ? mealPresets.filter(
              (m) =>
                m.name.toLowerCase().includes(ft) ||
                m.category.toLowerCase().includes(ft) ||
                m.tag.toLowerCase().includes(ft)
            )
          : mealPresets;

        grid.innerHTML = "";

        list.forEach((m) => {
          const card = document.createElement("button");
          card.type = "button";
          card.className =
            "food-card" + (m.id === selectedMealId ? " selected" : "");
          card.dataset.mealId = m.id;

          card.innerHTML = `
            <div class="food-title-row">
              <span>${m.emoji}</span>
              <span>${m.name}</span>
            </div>
            <div class="food-meta">
              ${m.category}
            </div>
            <div class="food-meta">
              ~${m.carbs} g carbs ‚Ä¢ ~${m.sugarBase} g sugar
            </div>
            <div class="food-tag">${m.tag}</div>
          `;

          card.addEventListener("click", () => {
            selectedMealId = m.id;
            renderFoodGrid(filterText);
            updateSelectedMealText();
            recalcAll();
          });

          grid.appendChild(card);
        });

        updateSelectedMealText();
      }

      function updateSelectedMealText() {
        const el = $("selectedMealText");
        if (!el) return;
        if (!selectedMealId) {
          el.textContent = "No meal selected yet.";
          return;
        }
        const preset = mealPresets.find((m) => m.id === selectedMealId);
        if (!preset) {
          el.textContent = "Meal not found.";
          return;
        }
        const dessertText =
          dessertExtraSugar === 0
            ? "no dessert"
            : dessertExtraSugar <= 12
            ? "small dessert added"
            : "big dessert added";

        el.textContent = `${preset.name} (~${preset.carbs} g carbs, ~${preset.sugarBase} g sugar) with ${dessertText}.`;
      }

      // --------- Mode + sliders + dessert ----------
      function setMode(mode) {
        currentMode = mode;
        $("modeSimpleBtn").classList.toggle("active", mode === "simple");
        $("modeAdvancedBtn").classList.toggle("active", mode === "advanced");
        $("simplePanel").classList.toggle("hidden", mode !== "simple");
        $("advancedPanel").classList.toggle("hidden", mode !== "advanced");
        $("modeDescription").textContent =
          mode === "simple"
            ? "Simple mode: pick the meal that looks closest to what you ate, then tweak dessert and sensitivity."
            : "Advanced mode: type in carb / sugar / caffeine numbers directly. Good if you know your labels or track macros.";
        recalcAll();
      }

      function updateSliderLabel(id, labelId) {
        const val = parseInt($(id).value, 10) || 0;
        const labelEl = $(labelId);
        let label = "Low";
        if (val === 1) label = "Medium";
        if (val === 2) label = "High";
        labelEl.textContent = label;
      }

      function setDessert(level) {
        if (level === "none") dessertExtraSugar = 0;
        if (level === "small") dessertExtraSugar = 10;
        if (level === "big") dessertExtraSugar = 35;

        $("dessertNoneBtn").classList.toggle("active", level === "none");
        $("dessertSmallBtn").classList.toggle("active", level === "small");
        $("dessertBigBtn").classList.toggle("active", level === "big");

        updateSelectedMealText();
        recalcAll();
      }

      // --------- Main recalc ----------
      function recalcAll() {
        const score = computeRiskScore();
        updateRiskGauge(score);
        updateTimeline();
      }

      // --------- Init ----------
      document.addEventListener("DOMContentLoaded", () => {
        // Mode buttons
        $("modeSimpleBtn").addEventListener("click", () => setMode("simple"));
        $("modeAdvancedBtn").addEventListener("click", () =>
          setMode("advanced")
        );

        // Food search
        $("foodSearchInput").addEventListener("input", (e) => {
          renderFoodGrid(e.target.value);
        });

        $("clearFoodBtn").addEventListener("click", () => {
          $("foodSearchInput").value = "";
          selectedMealId = null;
          renderFoodGrid("");
          recalcAll();
        });

        // Dessert chips
        $("dessertNoneBtn").addEventListener("click", () =>
          setDessert("none")
        );
        $("dessertSmallBtn").addEventListener("click", () =>
          setDessert("small")
        );
        $("dessertBigBtn").addEventListener("click", () =>
          setDessert("big")
        );

        // Sliders
        $("dayCarbSlider").addEventListener("input", () => {
          updateSliderLabel("dayCarbSlider", "dayCarbLabel");
          recalcAll();
        });
        $("advDayCarbSlider").addEventListener("input", () => {
          updateSliderLabel("advDayCarbSlider", "advDayCarbLabel");
          recalcAll();
        });
        $("visceralSlider").addEventListener("input", () => {
          updateSliderLabel("visceralSlider", "visceralLabel");
          recalcAll();
        });
        $("anxietySlider").addEventListener("input", () => {
          updateSliderLabel("anxietySlider", "anxietyLabel");
          recalcAll();
        });

        // Advanced inputs
        ["advCarbsInput", "advSugarInput", "advCaffeineInput"].forEach((id) => {
          $(id).addEventListener("input", recalcAll);
        });

        // Meal time
        $("mealTimeInput").addEventListener("input", recalcAll);

        // Manual recalc button
        $("recalcBtn").addEventListener("click", recalcAll);

        // Initial slider labels
        updateSliderLabel("dayCarbSlider", "dayCarbLabel");
        updateSliderLabel("advDayCarbSlider", "advDayCarbLabel");
        updateSliderLabel("visceralSlider", "visceralLabel");
        updateSliderLabel("anxietySlider", "anxietyLabel");

        // Default meal: plate of pasta so things are alive immediately
        selectedMealId = "pasta";
        renderFoodGrid("");
        setDessert("none");

        // Initial compute
        recalcAll();
      });
    </script>
  </div>
</body>
</html>
