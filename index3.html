<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Post-Meal Anxiety Timing Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Free, no-login calculator that estimates anxiety spikes after carbs, sugar and caffeine, based on timing and sensitivity.">
  <style>
    :root {
      --base-font-size: 18px;  /* global scaling */
      --bg: #050709;
      --card: #11141a;
      --card-soft: #151923;
      --accent: #22c5ff;
      --accent-soft: rgba(34, 197, 255, 0.12);
      --danger: #ff4d6a;
      --warn: #fbbf24;
      --ok: #22c55e;
      --text-main: #f5f5f5;
      --text-soft: #c0c6d4;
      --border-subtle: #374151;  /* brighter border */
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #101827 0, #020308 55%, #000 100%);
      color: var(--text-main);
      font-size: var(--base-font-size);
      -webkit-font-smoothing: antialiased;
    }

    * {
      box-sizing: border-box;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
      padding: 14px 14px 32px;
    }

    header {
      margin-bottom: 10px;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 10px;
      align-items: center;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    h1 {
      font-size: 1.4rem;
      margin: 0;
      letter-spacing: 0.01em;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .badge {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid var(--border-subtle);
      background: linear-gradient(120deg, rgba(34,197,255,0.18), rgba(15,23,42,0.5));
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .badge span.emoji {
      font-size: 1rem;
    }

    /* Always-visible score strip */
    .score-strip {
      margin: 8px 0 14px;
      border-radius: 10px;
      padding: 8px 12px;
      border: 1px solid var(--border-subtle);
      background: linear-gradient(120deg, rgba(34,197,255,0.16), rgba(15,23,42,0.9));
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
    }

    .score-strip-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .score-strip-label {
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .score-strip-value {
      font-size: 1.05rem;
      font-weight: 600;
    }

    .score-strip-value span.number {
      font-size: 1.2rem;
    }

    .score-strip-chip {
      font-size: 0.85rem;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
      color: var(--text-soft);
      background: rgba(15,23,42,0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .score-strip-cta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      align-items: center;
    }

    .small-btn {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.9);
      color: var(--text-soft);
      cursor: pointer;
      padding: 4px 10px;
      font-size: 0.85rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .small-btn.primary {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--text-main);
    }

    .small-btn:hover {
      filter: brightness(1.1);
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 16px;
      align-items: flex-start;
    }

    .card {
      border-radius: 14px;
      background: radial-gradient(circle at top left, rgba(15,118,255,0.18), rgba(15,23,42,0.96));
      border: 1px solid var(--border-subtle);
      padding: 12px 12px 14px;
    }

    .card-soft {
      border-radius: 14px;
      background: var(--card-soft);
      border: 1px solid var(--border-subtle);
      padding: 12px 12px 14px;
    }

    .card-title {
      font-size: 0.98rem;
      font-weight: 600;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-subtitle {
      font-size: 0.86rem;
      color: var(--text-soft);
      margin-bottom: 10px;
    }

    .section-row {
      margin-bottom: 12px;
    }

    label {
      font-size: 0.9rem;
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 4px;
    }

    .field {
      margin-bottom: 8px;
    }

    input[type="number"],
    input[type="time"],
    select {
      width: 100%;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.96);
      color: var(--text-main);
      font-size: 0.9rem;
    }

    /* Thicker time slider */
    input[type="range"] {
      width: 100%;
      -webkit-appearance: none;
      height: 28px;
      background: transparent;
    }

    input[type="range"]::-webkit-slider-runnable-track {
      height: 8px;
      background: #1f2937;
      border-radius: 999px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--accent);
      border: 2px solid #0f172a;
      margin-top: -7px; /* centers thumb on track */
      box-shadow: 0 0 6px rgba(34,197,255,0.8);
    }

    input[type="range"]::-moz-range-track {
      height: 8px;
      background: #1f2937;
      border-radius: 999px;
    }

    input[type="range"]::-moz-range-thumb {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--accent);
      border: 2px solid #0f172a;
      box-shadow: 0 0 6px rgba(34,197,255,0.8);
    }

    .pill-group {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .pill-btn {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.96);
      color: var(--text-soft);
      font-size: 0.86rem;
      padding: 4px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-btn.active {
      background: var(--accent);
      color: #020617;
      border-color: var(--accent);
      font-weight: 600;
    }

    .info-icon-btn {
      border-radius: 50%;
      border: 1px solid var(--border-subtle);
      width: 18px;
      height: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      background: rgba(15,23,42,0.9);
      color: var(--text-soft);
      cursor: pointer;
    }

    .info-text {
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-top: 4px;
      display: none;
    }

    .info-text.visible {
      display: block;
    }

    .helper-text {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    /* Food list */
    .food-search-row {
      display: flex;
      gap: 6px;
      margin-bottom: 6px;
    }

    .food-search-row input {
      flex: 1;
    }

    .food-search-row button {
      white-space: nowrap;
    }

    .food-list {
      border-radius: 10px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.75);
      max-height: 220px;
      overflow-y: auto;
      padding: 6px;
      font-size: 0.86rem;
    }

    .food-category {
      margin-bottom: 6px;
    }

    .food-category-title {
      font-size: 0.8rem;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin: 4px 2px;
    }

    .food-row {
      display: flex;
      gap: 6px;
      align-items: center;
      padding: 4px 6px;
      border-radius: 8px;
      cursor: pointer;
    }

    .food-row:hover {
      background: rgba(15,118,255,0.18);
    }

    .food-row.active {
      background: var(--accent-soft);
      border: 1px solid var(--accent);
    }

    .food-emoji {
      width: 22px;
    }

    .food-main {
      flex: 1;
    }

    .food-name {
      font-size: 0.86rem;
    }

    .food-meta {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .food-tag {
      font-size: 0.78rem;
      padding: 1px 6px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.9);
    }

    /* Right panel ‚Äì score and timeline */
    .score-main-number {
      font-size: 2.3rem;
      font-weight: 700;
    }

    .score-label-line {
      font-size: 0.9rem;
      color: var(--text-soft);
    }

    .risk-chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 0.85rem;
      border: 1px solid rgba(148,163,184,0.9);
    }

    .risk-low {
      background: rgba(34,197,94,0.2);
      border-color: rgba(34,197,94,0.9);
      color: #bbf7d0;
    }

    .risk-moderate {
      background: rgba(250,204,21,0.2);
      border-color: rgba(250,204,21,0.95);
      color: #fef9c3;
    }

    .risk-high {
      background: rgba(248,113,113,0.2);
      border-color: rgba(248,113,113,0.95);
      color: #fee2e2;
    }

    .gauge-bar {
      margin-top: 8px;
      margin-bottom: 4px;
      height: 16px;
      border-radius: 999px;
      position: relative;
      overflow: hidden;
      background: linear-gradient(90deg, #16a34a, #eab308, #f97316, #ef4444);
    }

    .gauge-marker {
      position: absolute;
      top: -4px;
      width: 2px;
      height: 24px;
      background: #fff;
      box-shadow: 0 0 6px rgba(255,255,255,0.9);
    }

    .gauge-marker::after {
      content: "";
      position: absolute;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 4px 4px 0 4px;
      border-style: solid;
      border-color: #fff transparent transparent transparent;
    }

    .gauge-scale {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    .breakdown-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .breakdown-chip {
      border-radius: 999px;
      padding: 3px 8px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.9);
    }

    /* Crash window map ‚Äì solid colors */
    .timeline-bar {
      margin-top: 6px;
      margin-bottom: 4px;
      border-radius: 999px;
      overflow: hidden;
      height: 14px;
      display: flex;
      border: 1px solid var(--border-subtle);
    }

    .timeline-seg {
      flex: 1;
    }

    .timeline-spike {
      background: #4ade80; /* green solid */
    }

    .timeline-crash {
      background: #fbbf24; /* yellow solid */
    }

    .timeline-recover {
      background: #60a5fa; /* blue solid */
    }

    .timeline-marker {
      position: relative;
      margin-top: 4px;
      height: 18px;
    }

    .timeline-marker-line {
      position: absolute;
      top: 0;
      width: 2px;
      height: 18px;
      background: #e5e7eb;
      box-shadow: 0 0 4px rgba(248,250,252,0.9);
    }

    .timeline-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-soft);
      margin-top: 2px;
    }

    .timeline-scale {
      display: flex;
      justify-content: space-between;
      font-size: 0.78rem;
      color: var(--text-soft);
      margin-top: 2px;
    }

    .symptom-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 4px;
      margin-bottom: 6px;
    }

    .symptom-btn {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.96);
      color: var(--text-soft);
      font-size: 0.8rem;
      padding: 4px 8px;
      cursor: pointer;
    }

    .symptom-btn:hover {
      filter: brightness(1.08);
    }

    .share-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 6px;
      align-items: center;
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .why-btn {
      border-radius: 999px;
      border: 1px solid var(--border-subtle);
      background: rgba(15,23,42,0.96);
      color: var(--text-main);
      font-size: 0.86rem;
      padding: 5px 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .why-text {
      margin-top: 6px;
      font-size: 0.82rem;
      color: var(--text-soft);
    }

    /* Responsive */
    @media (max-width: 840px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .page {
        padding: 10px 10px 26px;
      }
      .score-main-number {
        font-size: 2.1rem;
      }
      .food-list {
        max-height: 260px;
      }
    }
  </style>
</head>
<body>
<div class="page">
  <header>
    <div class="title-block">
      <h1>Post-Meal Anxiety Timing Calculator</h1>
      <div class="badge-row">
        <div class="badge">
          <span class="emoji">üß†</span>
          <span>Biology-based estimate; not mental weakness</span>
        </div>
        <span>Free forever ‚Ä¢ No login ‚Ä¢ No tracking</span>
      </div>
    </div>
  </header>

  <!-- Score strip (always visible at top) -->
  <div class="score-strip" id="scoreStrip">
    <div class="score-strip-main">
      <div class="score-strip-label">Current spike risk (0‚Äì100)</div>
      <div class="score-strip-value">
        <span class="number" id="stripScoreNumber">0</span>
        <span id="stripScoreLabel">Very low</span>
      </div>
    </div>
    <div class="score-strip-cta">
      <div class="score-strip-chip" id="stripWindowLabel">
        ‚è±Ô∏è Waiting for inputs‚Ä¶
      </div>
      <button class="small-btn primary" type="button" id="shareStripBtn">Share result</button>
    </div>
  </div>

  <div class="layout">
    <!-- LEFT SIDE: Inputs -->
    <div>
      <div class="card">
        <div class="card-title">Simple vs advanced</div>
        <div class="card-subtitle">Start simple with ‚Äúwhat did this meal look like‚Äù and rough sugar / caffeine, or switch to advanced to enter grams and mg.</div>
        <div class="pill-group" style="margin-bottom:8px;">
          <button class="pill-btn active" type="button" id="simpleModeBtn">Simple mode</button>
          <button class="pill-btn" type="button" id="advancedModeBtn">Advanced numbers</button>
        </div>
        <div class="field">
          <label for="timeSinceMealRange">
            Time since this meal (minutes)
            <button type="button" class="info-icon-btn" data-info-target="infoTime">
              i
            </button>
          </label>
          <input id="timeSinceMealRange" type="range" min="0" max="240" step="5" value="90">
          <div class="helper-text">
            <span id="timeSinceMealLabel">~90 minutes ago</span>
          </div>
          <div id="infoTime" class="info-text">
            Most people with sensitive guts and nerves feel a ‚Äúwave‚Äù between about 45 and 150 minutes after a carb / sugar / caffeine hit. This slider helps place you on that curve.
          </div>
        </div>
        <div class="field">
          <label for="mealClockTime">
            What time did you start this meal? <span style="font-size:0.8rem; color:var(--text-soft);">(optional)</span>
          </label>
          <input id="mealClockTime" type="time">
          <div class="helper-text" id="mealClockHelper">
            If you add a clock time, the crash window will show real clock times (for example 7:15‚Äì9:00 PM).
          </div>
        </div>
        <div class="field">
          <label for="sensitivitySelect">
            My sensitivity level
            <button type="button" class="info-icon-btn" data-info-target="infoSensitivity">i</button>
          </label>
          <select id="sensitivitySelect">
            <option value="0.8">Low sensitivity</option>
            <option value="1.0" selected>Medium</option>
            <option value="1.3">High (IBS / visceral hypersensitivity)</option>
          </select>
          <div id="infoSensitivity" class="info-text">
            Higher sensitivity amplifies the same carbs, sugar and caffeine into a bigger nerve reaction and crash. ‚ÄúHigh‚Äù matches people with IBS and visceral hypersensitivity more closely.
          </div>
        </div>
      </div>
            <!-- Simple mode panel -->
      <div id="simplePanel" class="card-soft" style="margin-top:10px;">
        <div class="card-title">Simple meal description</div>
        <div class="card-subtitle">
          Pick the closest match to what you just ate. You can fine-tune dessert, soda, and caffeine below.
        </div>

        <div class="section-row">
          <label>
            What did this meal look like?
          </label>
          <div class="food-search-row">
            <input id="foodSearch" type="text" placeholder="Search: pasta, pizza, sushi, salad‚Ä¶">
            <button type="button" class="small-btn" id="clearFoodBtn">Clear</button>
          </div>
          <div class="food-list" id="foodList">
            <!-- Food categories and items are inserted by JS -->
          </div>
        </div>

        <div class="section-row">
          <label>
            Dessert / extra sugar
            <button type="button" class="info-icon-btn" data-info-target="infoSugar">i</button>
          </label>
          <div class="pill-group" style="margin-bottom:4px;">
            <button type="button" class="pill-btn" data-sugar="0">No dessert</button>
            <button type="button" class="pill-btn" data-sugar="10">Small sweet (~10 g)</button>
            <button type="button" class="pill-btn" data-sugar="25">Big dessert (~25 g)</button>
          </div>
          <div class="field" style="margin-top:4px;">
            <label for="simpleSugarExact">Or enter rough sugar (grams)</label>
            <input id="simpleSugarExact" type="number" min="0" max="120" step="1" placeholder="e.g. 18">
          </div>
          <div id="infoSugar" class="info-text">
            Sugar spikes blood glucose quickly, then your system over-corrects. The ‚Äúcrash‚Äù can feel like sudden anxiety, internal buzzing, or fatigue.
          </div>
        </div>

        <!-- Soda buttons: caffeinated vs not, small/med/large -->
        <div class="section-row">
          <label>
            Soda with this meal
            <button type="button" class="info-icon-btn" data-info-target="infoSoda">i</button>
          </label>
          <div class="pill-group">
            <button type="button" class="pill-btn" data-soda-sugar="0" data-soda-caf="0">No soda</button>
            <button type="button" class="pill-btn" data-soda-sugar="35" data-soda-caf="0">Small, no caffeine</button>
            <button type="button" class="pill-btn" data-soda-sugar="50" data-soda-caf="0">Medium, no caffeine</button>
            <button type="button" class="pill-btn" data-soda-sugar="65" data-soda-caf="0">Large, no caffeine</button>
            <button type="button" class="pill-btn" data-soda-sugar="35" data-soda-caf="30">Small, caffeinated</button>
            <button type="button" class="pill-btn" data-soda-sugar="50" data-soda-caf="45">Medium, caffeinated</button>
            <button type="button" class="pill-btn" data-soda-sugar="65" data-soda-caf="60">Large, caffeinated</button>
          </div>
          <div id="infoSoda" class="info-text">
            Soda is basically liquid sugar; caffeinated soda layers a smaller caffeine spike on top. Picking this helps the calculator set both sugar and caffeine realistically.
          </div>
        </div>

        <div class="section-row">
          <label>
            Other caffeine with or around this meal
            <button type="button" class="info-icon-btn" data-info-target="infoCaffeine">i</button>
          </label>
          <div class="pill-group" style="margin-bottom:4px;">
            <button type="button" class="pill-btn" data-caf="0">No other caffeine</button>
            <button type="button" class="pill-btn" data-caf="80">Small coffee / strong tea</button>
            <button type="button" class="pill-btn" data-caf="140">Big coffee</button>
            <button type="button" class="pill-btn" data-caf="200">Energy drink</button>
          </div>
          <div class="field" style="margin-top:4px;">
            <label for="simpleCafExact">Or enter caffeine (mg)</label>
            <input id="simpleCafExact" type="number" min="0" max="400" step="10" placeholder="e.g. 120">
          </div>
          <div id="infoCaffeine" class="info-text">
            Caffeine spikes adrenaline. Combined with carbs and sugar, it can turn a normal crash into a jittery, chest-warm, ‚Äúwired and tired‚Äù wave.
          </div>
        </div>
      </div>

      <!-- Advanced mode panel -->
      <div id="advancedPanel" class="card-soft" style="margin-top:10px; display:none;">
        <div class="card-title">Advanced meal details</div>
        <div class="card-subtitle">
          If you like numbers, enter your own estimates. These override simple mode values.
        </div>
        <div class="section-row">
          <div class="field">
            <label for="advCarbs">
              Carbs in this meal (g)
            </label>
            <input id="advCarbs" type="number" min="0" max="200" step="5" placeholder="e.g. 80 for a plate of pasta">
          </div>
          <div class="field">
            <label for="advSugar">Added / free sugar (g)</label>
            <input id="advSugar" type="number" min="0" max="150" step="1" placeholder="e.g. 25 for dessert">
          </div>
          <div class="field">
            <label for="advCaffeine">Caffeine (mg)</label>
            <input id="advCaffeine" type="number" min="0" max="400" step="10" placeholder="e.g. 140 for a big coffee">
          </div>
        </div>
        <div class="section-row">
          <div class="field">
            <label for="advFiber">Fiber in this meal (g)</label>
            <input id="advFiber" type="number" min="0" max="40" step="1" placeholder="e.g. 6">
          </div>
          <div class="field">
            <label for="advFat">
              Fat level
              <button type="button" class="info-icon-btn" data-info-target="infoFat">i</button>
            </label>
            <select id="advFat">
              <option value="0">Low (grilled, minimal oil)</option>
              <option value="1">Medium (some oil / cheese / dressing)</option>
              <option value="2">High (heavy cream, deep fried, fast food)</option>
            </select>
            <div id="infoFat" class="info-text">
              Fat slows stomach emptying. That can delay the crash, sometimes turning it into a late-evening or next-morning wave instead of an immediate one.
            </div>
          </div>
        </div>
      </div>
    </div>
        <!-- RIGHT SIDE: Score, timeline, explanations -->
    <div>
      <div class="card">
        <div class="card-title">Your current spike estimate</div>
        <div class="card-subtitle">
          This is a biology-based guess at how much today‚Äôs carbs, sugar and caffeine are pushing your nervous system right now.
        </div>
        <div style="display:flex; justify-content:space-between; align-items:flex-end; gap:8px;">
          <div>
            <div class="score-main-number" id="scoreMainNumber">0</div>
            <div class="score-label-line">
              <span id="scoreMainLabel">Very low</span>
            </div>
          </div>
          <div class="risk-chip" id="riskChip">Waiting for inputs‚Ä¶</div>
        </div>

        <div class="gauge-bar">
          <div class="gauge-marker" id="gaugeMarker" style="left:0%;"></div>
        </div>
        <div class="gauge-scale">
          <span>0</span>
          <span>25</span>
          <span>50</span>
          <span>75</span>
          <span>100</span>
        </div>

        <div class="breakdown-row" id="breakdownRow">
          <span class="breakdown-chip">Carbs: 0%</span>
          <span class="breakdown-chip">Sugar: 0%</span>
          <span class="breakdown-chip">Caffeine: 0%</span>
          <span class="breakdown-chip">Timing / sensitivity: 0%</span>
        </div>

        <div class="section-row" style="margin-top:10px;">
          <label>
            Crash window map
            <button type="button" class="info-icon-btn" data-info-target="infoTimeline">i</button>
          </label>
          <div class="timeline-bar">
            <div class="timeline-seg timeline-spike"></div>
            <div class="timeline-seg timeline-crash"></div>
            <div class="timeline-seg timeline-recover"></div>
          </div>
          <div class="timeline-marker">
            <div class="timeline-marker-line" id="timelineMarkerLine" style="left:0%;"></div>
          </div>
          <div class="timeline-labels">
            <span>0‚Äì45 min: spike building</span>
            <span>45‚Äì150 min: crash / anxiety</span>
            <span>150‚Äì240 min: recovery / slump</span>
          </div>
          <div class="timeline-scale">
            <span>0</span>
            <span>60</span>
            <span>120</span>
            <span>180</span>
            <span>240 min</span>
          </div>
          <div class="helper-text" id="clockWindowLabel">
            Add a meal time on the left to see your crash window in clock time.
          </div>
          <div id="infoTimeline" class="info-text">
            Heavy carbs + sugar + caffeine rarely cause ‚Äúrandom‚Äù feelings. They create a spike, then a crash, then a slump. This bar shows roughly where you are in that 0‚Äì240 minute cycle.
          </div>
        </div>

        <div class="section-row">
          <label>Right now I feel‚Ä¶</label>
          <div class="symptom-buttons">
            <button type="button" class="symptom-btn" data-symptom="jittery">Jittery / buzzy</button>
            <button type="button" class="symptom-btn" data-symptom="warmChest">Warm chest / wired</button>
            <button type="button" class="symptom-btn" data-symptom="flat">Flat / wiped out</button>
            <button type="button" class="symptom-btn" data-symptom="gutBuzz">Gut buzzing</button>
            <button type="button" class="symptom-btn" data-symptom="headache">Headache-ish</button>
            <button type="button" class="symptom-btn" data-symptom="randomAdrenaline">Random adrenaline hits</button>
          </div>
          <div id="symptomText" class="helper-text">
            Tap one that fits and we‚Äôll tell you whether it matches the predicted crash window.
          </div>
        </div>

        <div class="share-row">
          <button type="button" class="small-btn primary" id="shareBtn">Copy a short summary</button>
          <span id="shareStatus">No text copied yet.</span>
        </div>
      </div>

      <div class="card-soft" style="margin-top:10px;">
        <div class="card-title">
          Why does this feel like ‚Äúanxiety‚Äù?
        </div>
        <button type="button" class="why-btn" id="whyBtn">
          Why am I feeling this way?
        </button>
        <div id="whyText" class="why-text" style="display:none;">
          Your brain often labels biology as ‚Äúanxiety‚Äù. A heavy carb + sugar + caffeine load can:
          <ul style="padding-left:18px; margin:4px 0;">
            <li>Stretch your gut and trigger visceral nerves</li>
            <li>Spike blood sugar and then over-correct into a crash</li>
            <li>Layer caffeine-driven adrenaline on top of that crash</li>
          </ul>
          If you are highly sensitive, that internal noise can feel identical to ‚ÄúI am freaking out‚Äù, even when nothing external is wrong. This tool is here to show that a lot of it is timing and chemistry, not personal failure.
        </div>
      </div>
    </div>
  </div> <!-- end layout -->

</div> <!-- end page -->
      <!-- RIGHT SIDE: Score, timeline, explanations -->
    <div>
      <div class="card">
        <div class="card-title">Your current spike estimate</div>
        <div class="card-subtitle">
          This is a biology-based guess at how much today‚Äôs carbs, sugar and caffeine are pushing your nervous system right now.
        </div>
        <div style="display:flex; justify-content:space-between; align-items:flex-end; gap:8px;">
          <div>
            <div class="score-main-number" id="scoreMainNumber">0</div>
            <div class="score-label-line">
              <span id="scoreMainLabel">Very low</span>
            </div>
          </div>
          <div class="risk-chip" id="riskChip">Waiting for inputs‚Ä¶</div>
        </div>

        <div class="gauge-bar">
          <div class="gauge-marker" id="gaugeMarker" style="left:0%;"></div>
        </div>
        <div class="gauge-scale">
          <span>0</span>
          <span>25</span>
          <span>50</span>
          <span>75</span>
          <span>100</span>
        </div>

        <div class="breakdown-row" id="breakdownRow">
          <span class="breakdown-chip">Carbs: 0%</span>
          <span class="breakdown-chip">Sugar: 0%</span>
          <span class="breakdown-chip">Caffeine: 0%</span>
          <span class="breakdown-chip">Timing / sensitivity: 0%</span>
        </div>

        <div class="section-row" style="margin-top:10px;">
          <label>
            Crash window map
            <button type="button" class="info-icon-btn" data-info-target="infoTimeline">i</button>
          </label>
          <div class="timeline-bar">
            <div class="timeline-seg timeline-spike"></div>
            <div class="timeline-seg timeline-crash"></div>
            <div class="timeline-seg timeline-recover"></div>
          </div>
          <div class="timeline-marker">
            <div class="timeline-marker-line" id="timelineMarkerLine" style="left:0%;"></div>
          </div>
          <div class="timeline-labels">
            <span>0‚Äì45 min: spike building</span>
            <span>45‚Äì150 min: crash / anxiety</span>
            <span>150‚Äì240 min: recovery / slump</span>
          </div>
          <div class="timeline-scale">
            <span>0</span>
            <span>60</span>
            <span>120</span>
            <span>180</span>
            <span>240 min</span>
          </div>
          <div class="helper-text" id="clockWindowLabel">
            Add a meal time on the left to see your crash window in clock time.
          </div>
          <div id="infoTimeline" class="info-text">
            Heavy carbs + sugar + caffeine rarely cause ‚Äúrandom‚Äù feelings. They create a spike, then a crash, then a slump. This bar shows roughly where you are in that 0‚Äì240 minute cycle.
          </div>
        </div>

        <div class="section-row">
          <label>Right now I feel‚Ä¶</label>
          <div class="symptom-buttons">
            <button type="button" class="symptom-btn" data-symptom="jittery">Jittery / buzzy</button>
            <button type="button" class="symptom-btn" data-symptom="warmChest">Warm chest / wired</button>
            <button type="button" class="symptom-btn" data-symptom="flat">Flat / wiped out</button>
            <button type="button" class="symptom-btn" data-symptom="gutBuzz">Gut buzzing</button>
            <button type="button" class="symptom-btn" data-symptom="headache">Headache-ish</button>
            <button type="button" class="symptom-btn" data-symptom="randomAdrenaline">Random adrenaline hits</button>
          </div>
          <div id="symptomText" class="helper-text">
            Tap one that fits and we‚Äôll tell you whether it matches the predicted crash window.
          </div>
        </div>

        <div class="share-row">
          <button type="button" class="small-btn primary" id="shareBtn">Copy a short summary</button>
          <span id="shareStatus">No text copied yet.</span>
        </div>
      </div>

      <div class="card-soft" style="margin-top:10px;">
        <div class="card-title">
          Why does this feel like ‚Äúanxiety‚Äù?
        </div>
        <button type="button" class="why-btn" id="whyBtn">
          Why am I feeling this way?
        </button>
        <div id="whyText" class="why-text" style="display:none;">
          Your brain often labels biology as ‚Äúanxiety‚Äù. A heavy carb + sugar + caffeine load can:
          <ul style="padding-left:18px; margin:4px 0;">
            <li>Stretch your gut and trigger visceral nerves</li>
            <li>Spike blood sugar and then over-correct into a crash</li>
            <li>Layer caffeine-driven adrenaline on top of that crash</li>
          </ul>
          If you are highly sensitive, that internal noise can feel identical to ‚ÄúI am freaking out‚Äù, even when nothing external is wrong. This tool is here to show that a lot of it is timing and chemistry, not personal failure.
        </div>
      </div>
    </div>
  </div> <!-- end layout -->

</div> <!-- end page -->
